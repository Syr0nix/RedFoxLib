-- RedFoxUILib - Clean Working Base

local RedFoxUILib = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")

-- Destroy old UI if present
local existing = CoreGui:FindFirstChild("RedFoxUI")
if existing then existing:Destroy() end

-- Blur Background
local blur = Instance.new("BlurEffect")
blur.Size = 18
blur.Parent = Lighting
coroutine.wrap(function()
	task.wait(4)
	TweenService:Create(blur, TweenInfo.new(0.4), {Size = 0}):Play()
	task.wait(0.4)
	blur:Destroy()
end)()

-- GUI Base
local gui = Instance.new("ScreenGui")
gui.Name = "RedFoxUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = CoreGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 700, 0, 450)
mainFrame.Position = UDim2.new(0.5, -350, 0.5, -225)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BorderSizePixel = 0
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.Parent = gui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel")
title.Text = "RedFoxUI"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 0, 0)
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextXAlignment = Enum.TextXAlignment.Left
title.Position = UDim2.new(0, 10, 0, 0)
title.Parent = mainFrame

-- Tab Bar
local tabBar = Instance.new("Frame")
tabBar.Size = UDim2.new(0, 140, 1, 0)
tabBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
tabBar.BorderSizePixel = 0
tabBar.Parent = mainFrame

local tabLayout = Instance.new("UIListLayout")
tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabLayout.Padding = UDim.new(0, 6)
tabLayout.Parent = tabBar

-- Content Panel
local contentFrame = Instance.new("Frame")
contentFrame.Position = UDim2.new(0, 140, 0, 40)
contentFrame.Size = UDim2.new(1, -140, 1, -40)
contentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
contentFrame.BorderSizePixel = 0
contentFrame.ClipsDescendants = true
contentFrame.Parent = mainFrame

RedFoxUILib.Tabs = {}

function RedFoxUILib.NewTab(name)
	local button = Instance.new("TextButton")
	button.Text = name
	button.Size = UDim2.new(1, 0, 0, 40)
	button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	button.TextColor3 = Color3.fromRGB(255, 0, 0)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 14
	button.BorderSizePixel = 0
	button.Parent = tabBar
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

	local page = Instance.new("ScrollingFrame")
	page.Size = UDim2.new(1, 0, 1, 0)
	page.BackgroundTransparency = 1
	page.ScrollBarThickness = 4
	page.Visible = false
	page.Parent = contentFrame

	local layout = Instance.new("UIListLayout")
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 6)
	layout.Parent = page

	RedFoxUILib.Tabs[name] = page

	button.MouseButton1Click:Connect(function()
		for _, tab in pairs(RedFoxUILib.Tabs) do tab.Visible = false end
		page.Visible = true
	end)

	if not RedFoxUILib.Current then
		page.Visible = true
		RedFoxUILib.Current = page
	end

	return page
end

function RedFoxUILib.CreateButton(tab, text, callback)
	local btn = Instance.new("TextButton")
	btn.Text = text
	btn.Size = UDim2.new(1, -10, 0, 40)
	btn.Position = UDim2.new(0, 5, 0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.BorderSizePixel = 0
	btn.Parent = tab
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
	btn.MouseButton1Click:Connect(callback)
	return btn
end

function RedFoxUILib.Load(tab, config)
	for _, item in ipairs(config) do
		if item.type == "button" then
			RedFoxUILib.CreateButton(tab, item.text, item.callback)
		end
	end
end

return RedFoxUILib
